<!DOCTYPE html>
<!-- This is a wip modal + floating button. css and js may be external -->
<html>
<head>
<meta name="viewport" content="width-device-width, initial-scale=1">
<link rel="stylesheet" href="https://skintifique.github.io/skinty_modal.css">
</head>
<body>
<!-- inputs to provide when deploying the file -->  
<input hidden id="promb" value="sk"></input>
<input hidden id="floatingBtn_themeb" value=""></input>
<input hidden id="floatingBtn_showb" value="yes"></input>
<input hidden id="floatingBtn_formatb" value="close"></input>
<input hidden id="floatingBtn_showb" value="yes"></input>
<input hidden id="floatingBtn_url_read" value="yes"></input>
<!-- floatingBtn_url_read (yes/no) specifies whether the floating button, if displayed and clicked, will start on a page specified by the url of the page where the code is installed-->  
<!-- end -->  
<br>
<br>
<br>
<!-- example of a button triggering opening of SkinTy modal page, starting on a specific theme -->  
<button id="ModalBtnTheme_1" class="" onclick="openSkintyModal(this)" value="allergy">When you click me, SkinTy will show up and start on the allergy page</button>
<!-- example of a button triggering opening of SkinTy modal page, starting with a specific query -->    
<p>lorem ipsum...<button id="ModalBtnQuery_1" class="" onclick="openSkintyModal(this)" value="Which ingredients should be avoided in skincare products?"><u>Skintifique products contain no ingredients that should be avoided in skincare products</u></button>...lorem ipsum</p> 
<!-- end example buttons -->  
  
  
<button id="ModalFloatingTheme" class="modalBtn, float" onclick="openSkintyModal(this)" value="">
<img class= "img.displayed" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYA2n-s-Pn6rtQz-3aLUgj8s1XxhahIv0ZPA&usqp=CAU"  width="30px" height="30px" />
</button>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close" onclick="closeSkintyModal()">&times;</span>
    <p>
<div id="divSkintyFrame" class="divSkintyForIframe30">
<iframe id="skintyframe" src="" width="100%" height="700px" style="border:none;"></iframe>
</div>
    </p>
<span class="close" onclick="closeSkintyModal()">&times;</span>
  </div>
</div>

<script>
let windowwidth = window.innerWidth;
if (windowwidth < 500) {
document.getElementById("divSkintyFrame").className ="divSkintyForIframe" ;
}
</script>

<script>
function openSkintyModal (x) {
// Get the modal
let modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
let span = document.getElementsByClassName("close")[0];

// open the modal 
  modal.style.display = "block";
let y = x.id ;
let z = y.search("Query") ;
let t = y.search("Theme") ;
let btnType ; 
if (z > -1) {btnType = "Query";} else if (t > -1) {btnType = "Theme";} ;
let v ;
let url = window.location.href ;
if (url.includes("eczema")) {
    v = "eczema" ;
} else if (url.includes("dermatit")) {
    v = "eczema" ;
} else if (url.includes("psoriasis")) {
    v = "psoriasis"
} else if (url.includes("allergy")) {
    v = "allergy" ;
} else if (url.includes("maternity")) {
    v = "maternity" ;
} else if (url.includes("pregnan")) {
    v = "maternity" ;
} else if (url.includes("acne")) {
    v = "acne" ;
} else if (url.includes("mature")) {
    v = "mature" ;
} else {
    v = "default" ; 
}
let prombM = "sk" ;
let querybM ;
if (btnType == "Query") {querybM = v ;} else {querybM = "";} ;
let themebM ;
if (btnType == "Theme") {themebM = v ;} else {themebM = "";} ;
let formatbM = "" ;
let showbM = "show" ;
let target_urlM = "https://skintifique.github.io/index.html" + "?promb=" + prombM  + "&queryb=" + querybM + "&themeb=" + themebM + "&formatb=" + formatbM + "&showb=" + showbM ;
document.getElementById("skintyframe").src = target_urlM ;
}
</script>

<script>
function closeSkintyModal() {
// Get the modal
let modal = document.getElementById("myModal");
// When the user clicks on <span> (x), close the modal
  modal.style.display = "none";
}
</script>

<script>
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
// Get the modal
let modal = document.getElementById("myModal");
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>


</body>
</html>
