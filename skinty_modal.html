<!DOCTYPE html>
<!-- This is a wip modal + floating button. css and js may be external -->
<html>
<head>
<meta name="viewport" content="width-device-width, initial-scale=1">
<link rel="stylesheet" href="https://skintifique.github.io/skinty/skinty_modal.css">
</head>
<body>
<!-- inputs to provide when deploying the file -->  
<input hidden id="promb" value="sk"></input>
<!-- floatingBtn_themeb defines the default theme that floating SkinTy will open on (provided it is shown as specified with floatingBtn_showb -->
<!-- if a value is provided for floatingBtn_themeb, then it takes precedence over floatingBtn_url_keywords which becomes useless  --> 
<input hidden id="floatingBtn_themeb" value=""></input>
<!-- floatingBtn_showb defines which pages will display the floating btn: if "all": all pages, if keyword "xxx": only the pages where the url contains "xxx". At the present time, only one keyword is possible -->  
<!-- At the present time, only one keyword is possible. If no input is provided, the parameter will be set up so as to show the floating button on all pages, by default -->  
<input hidden id="floatingBtn_showb" value="all"></input>
<input hidden id="floatingBtn_formatb" value="close"></input>
<input hidden id="floatingBtn_url_keywords" value="skintifique,eczema,dermatitis,maternity,pregnant,allergy"></input>
<!-- floatingBtn_url_keywords specifies whether the floating button, if displayed and clicked, will start on a page specified by the url of the page where the code is installed-->  
<!-- floatingBtn_url_keywords is useless if a theme has been entered through floatingBtn_themeb -->  
<!-- end -->  
<br>
<br>
<br>
<!-- example of a button triggering opening of SkinTy modal page, starting on a specific theme -->  
<button id="ModalBtnTheme_1" class="SkintyBtnDefault" onclick="openSkintyModal(this)" value="allergy">When you click me, SkinTy will show up and start on the allergy page</button>
<!-- example of a button triggering opening of SkinTy modal page, starting with a specific query -->    
<p>lorem ipsum...<button id="ModalBtnQuery_1" class="SkintyBtnDefault" onclick="openSkintyModal(this)" value="Which ingredients should be avoided in skincare products?"><u>Skintifique products contain no ingredients that should be avoided in skincare products</u></button>...lorem ipsum</p> 
<!-- end example buttons -->  
  
  
<button id="ModalBtnFloat" class="SkintyBtnFloat, float" onclick="openSkintyModal(this)" value="">
<img class= "img.displayed" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYA2n-s-Pn6rtQz-3aLUgj8s1XxhahIv0ZPA&usqp=CAU"  width="30px" height="30px" />
</button>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close" onclick="closeSkintyModal()">&times;</span>
    <p>
<div id="divSkintyFrame" class="divSkintyForIframe30">
<iframe id="skintyframe" src="" width="100%" height="700px" style="border:none;"></iframe>
</div>
    </p>
<span class="close" onclick="closeSkintyModal()">&times;</span>
  </div>
</div>

<script>
let windowwidth = window.innerWidth;
if (windowwidth < 500) {
document.getElementById("divSkintyFrame").className ="divSkintyForIframe" ;
}
</script>

<p id="devdemo">p</p>

<script>
function openSkintyModal (x) {
// Get the modal
let modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
let span = document.getElementsByClassName("close")[0];

// open the modal 
  modal.style.display = "block";
let y = x.id ;
let z = y.search("Query") ;
let t = y.search("Theme") ;
let u = y.search("Float");
let btnType ; 
if (z > -1) {btnType = "Query";} else if (t > -1) {btnType = "Theme";} else if (u > -1) {btnType = "Float";}
  document.getElementById("devdemo").innerHTML = btnType ;
if (btnType == "Float") {
  openSkintyModalFloat () ;
  } else if (btnType == "Theme") {
  openSkintyModalTheme (x) ;
  } else if (btnType == "Query") {
  openSkintyModalTheme (x) ;
 }
 }
</script>

<script>
function openSkintyModalFloat () {
let prombM = document.getELementById("promb").value ;
let formatbM = "close" ;
let showbM ;
let url = window.location.href ;
let floatingBtn_showb = document.getElementById("floatingBtn_showb").value ;
  if (floatingBtn_showb.length == "all") {
    showbM = "show" ;
    } else if (url.includes(floatingBtn_showb)) {
    showbM = "show" ;
    } else if (floatingBtn_showb.length == 0) {
    showbM = "show" ;
    } else {
    showbM = "hide" ;
    } 
let themebM ;
let floatingBtn_url_keywords = document.getELementById("floatingBtn_url_keywords").value ;
  if (floatingBtn_url_keywords.length > 0) {
    if (url.includes("eczema")) && (floatingBtn_url_keywords.includes("eczema")) {
    themebM = "eczema" ;
    } else if (url.includes("dermatit")) && (floatingBtn_url_keywords.includes("dermatit")) {
    themebM = "eczema" ;
    } else if (url.includes("psoriasis")) && (floatingBtn_url_keywords.includes("psoriasis")) {
    themebM = "psoriasis"
    } else if (url.includes("allergy")) && (floatingBtn_url_keywords.includes("allergy")) {
    themebM = "allergy" ;
    } else if (url.includes("maternity")) && (floatingBtn_url_keywords.includes("maternity")) {
    themebM = "maternity" ;
    } else if (url.includes("pregnan")) && (floatingBtn_url_keywords.includes("pregnant")) {
    themebM = "maternity" ;
    } else if (url.includes("acne")) && (floatingBtn_url_keywords.includes("acne")) {
    themebM = "acne" ;
    } else if (url.includes("mature-skin")) && (floatingBtn_url_keywords.includes("mature-skin")) {
    themebM = "mature_skin" ;
    } else {
    themebM = "default" ; 
    } 
   } else {
    themebM = "default" ;
   }
let target_urlM = "https://skintifique.github.io/index.html" + "?promb=" + prombM  + "queryb=" + "&themeb=" + themebM + "&formatb=" + formatbM + "&showb=" + showbM ;
document.getElementById("skintyframe").src = target_urlM ;
}
</script>

<script>
function openSkintyModalTheme (x) {
let prombM = document.getELementById("promb").value ;
let formatbM = "close" ;
let showbM = "show" ;
let themebM = x.value ;
let querybM = "" ;
let target_urlM = "https://skintifique.github.io/index.html" + "?promb=" + prombM  + "&queryb=" + querybM + "&themeb=" + themebM + "&formatb=" + formatbM + "&showb=" + showbM ;
document.getElementById("skintyframe").src = target_urlM ;
}
</script>

<script>
function openSkintyModalQuery (x) {
let prombM = document.getELementById("promb").value ;
let formatbM = "close" ;
let showbM = "show" ;
let themebM = "" ;
let querybM = x.value ;
let target_urlM = "https://skintifique.github.io/index.html" + "?promb=" + prombM  + "&queryb=" + querybM + "&themeb=" + themebM + "&formatb=" + formatbM + "&showb=" + showbM ;
document.getElementById("skintyframe").src = target_urlM ;
}
</script>

<script>
function closeSkintyModal() {
// Get the modal
let modal = document.getElementById("myModal");
// When the user clicks on <span> (x), close the modal
  modal.style.display = "none";
}
</script>

<script>
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
// Get the modal
let modal = document.getElementById("myModal");
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>


</body>
</html>
